# Studymate Server

스터디메이트 프로젝트의 백엔드 서버입니다.

## 목차

- [프로젝트 소개](#프로젝트-소개)
- [기술 스택](#기술-스택)
- [NCP 배포 아키텍처](#ncp-배포-아키텍처)
  - [아키텍처 다이어그램](#아키텍처-다이어그램)
  - [네트워크 구성](#네트워크-구성)
  - [보안 설정](#보안-설정)
  - [서버 및 배포](#서버-및-배포)
- [시작하기](#시작하기)

## 프로젝트 소개

(여기에 프로젝트에 대한 간략한 설명을 추가해주세요.)

## 기술 스택

- **Language:** Java 17
- **Framework:** Spring Boot 3
- **Database:** MySQL
- **Cache:** Redis
- **Build Tool:** Gradle

---

## NCP 배포 아키텍처

이 프로젝트는 Naver Cloud Platform(NCP)에 고가용성 및 보안을 고려하여 배포됩니다.

### 아키텍처 다이어그램

```
+---------------------------------------------------------------------------------+
|                                  Internet                                       |
+----------------------------------+----------------------------------------------+
                                   |
                                   v
+--------------------------+---------------------------+
|     languagemate.kr      |      DNS (NCP)            |
+--------------------------+---------------------------+
                                   |
                                   v
+---------------------------------------------------------------------------------+
|                            VPC (studymate-vpc) 10.0.0.0/16                        |
|                                                                                 |
| +-----------------------------------------------------------------------------+ |
| | Public Subnet (studymate-public-subnet) 10.0.1.0/24                         | |
| |                                                                             | |
| |   +-------------------------+      +------------------------------------+   | |
| |   |   Internet Gateway      |----->|  Load Balancer (studymate-lb)      |   | |
| |   +-------------------------+      |   - Public IP                      |   | |
| |                                    |   - ACG: studymate-lb-acg          |   | |
| |                                    |   - NACL: studymate-public-nacl    |   | |
| |                                    |   - SSL/TLS Offloading             |   | |
| |                                    +------------------+-----------------+   | |
| +-------------------------------------------------------|---------------------+ |
|                                                         | (HTTPS/443 -> HTTP/8080)
|                                                         v
| +-----------------------------------------------------------------------------+ |
| | Private Subnet (studymate-private-subnet) 10.0.2.0/24                       | |
| |                                                                             | |
| |   +-------------------------+      +------------------------------------+   | |
| |   |    NAT Gateway          |<---->|  Server Instance (VM)              |   | |
| |   |   (Outbound Traffic)    |      |   - Private IP                     |   | |
| |   +-------------------------+      |   - ACG: studymate-server-acg      |   | |
| |                                    |   - NACL: studymate-private-nacl   |   | |
| |                                    |                                    |   | |
| |                                    |   +------------------------------+ |   | |
| |                                    |   | Docker Engine                | |   | |
| |                                    |   |  - studymate-app (Java)      | |   | |
| |                                    |   |  - studymate-db (MySQL)      | |   | |
| |                                    |   |  - studymate-redis (Redis)   | |   | |
| |                                    |   +------------------------------+ |   | |
| |                                    +------------------------------------+   | |
| +-----------------------------------------------------------------------------+ |
|                                                                                 |
+---------------------------------------------------------------------------------+
```

### 네트워크 구성

-   **VPC (`studymate-vpc`):** `10.0.0.0/16` 대역을 사용하는 격리된 가상 네트워크입니다.
-   **Public Subnet (`studymate-public-subnet`):** `10.0.1.0/24` 대역을 사용하며, 외부 인터넷과 직접 통신하는 리소스(로드밸런서)가 위치합니다.
    -   **Internet Gateway:** VPC와 외부 인터넷 간의 통신을 담당합니다.
-   **Private Subnet (`studymate-private-subnet`):** `10.0.2.0/24` 대역을 사용하며, 외부에서 직접 접근할 수 없는 내부 리소스(애플리케이션 서버)가 위치합니다.
    -   **NAT Gateway:** Private Subnet의 서버가 외부 인터넷(예: GitHub, 외부 API)으로 나가는 아웃바운드 통신을 위해 사용됩니다.

### 보안 설정

-   **Network ACL (NACL):** 서브넷 레벨의 방화벽으로, Stateless 방식으로 동작합니다.
    -   `studymate-public-nacl`: Public Subnet에 적용되며, HTTP(80), HTTPS(443) 트래픽만 허용합니다.
    -   `studymate-private-nacl`: Private Subnet에 적용되며, 로드밸런서로부터의 8080 포트 트래픽과 관리자 SSH 접속 등 최소한의 트래픽만 허용합니다.
-   **ACG (Access Control Group):** 서버 인스턴스 레벨의 방화벽으로, Stateful 방식으로 동작합니다.
    -   `studymate-lb-acg`: 로드밸런서에 적용되며, HTTP(80), HTTPS(443) 트래픽을 허용합니다.
    -   `studymate-server-acg`: 서버 인스턴스에 적용되며, 로드밸런서가 속한 Public Subnet 대역에서의 8080 포트 접근과 관리자 IP에서의 SSH(22) 접근만 허용합니다.

### 서버 및 배포

-   **서버 인스턴스:** Private Subnet에 위치하며, 외부에서 직접 접근이 불가능합니다.
-   **로드밸런서:** Application Load Balancer를 사용하여 `languagemate.kr` 도메인의 HTTPS 요청을 받아 서버의 8080 포트로 전달합니다. SSL 인증서 관리 및 암호화/복호화(SSL Offloading)를 담당합니다.
-   **배포 방식:**
    -   GitHub Actions를 통해 CI/CD 파이프라인을 구축합니다.
    -   애플리케이션, MySQL, Redis는 서버 인스턴스 내의 Docker 컨테이너로 실행되며, `docker-compose`를 통해 관리됩니다.
    -   GitHub Actions는 코드를 빌드하고 Docker 이미지를 생성하여 NCP Container Registry에 푸시한 후, SSH를 통해 서버에 접속하여 최신 이미지를 받아 서비스를 재시작하는 방식으로 배포를 자동화합니다.

## 시작하기

(여기에 로컬 환경에서 프로젝트를 실행하는 방법을 추가해주세요.)
